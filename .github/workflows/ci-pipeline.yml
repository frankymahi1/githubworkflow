   # .github/workflows/python-app.yml

   name: Python application

   on:
     push:
       branches: [ main,github_test_branch ]
     pull_request:
       branches: [ main,github_test_branch ]
     workflow_dispatch:

   jobs:
     build:

       runs-on: ubuntu-latest

       steps:
       - uses: actions/checkout@v2

       - name: Set up Python
         uses: actions/setup-python@v2
         with:
           python-version: '3.x'

       - name: Install dependencies
         run: |
           python -m pip install --upgrade pip
           pip install -r requirements.txt

       - name: Run tests
         run: |
           pytest

     run_test_cases:
       runs-on: ubuntu-latest
       needs: build  # This line makes run_test_cases dependent on build
       strategy:
         matrix:
           job: [ virtual_dataset_registration, physical_dataset_registration, task_flow_execution, schema_registation, databricks_notebook ]


       steps:
       - uses: actions/checkout@v2

       - name: Set up Python
         uses: actions/setup-python@v2
         with:
           python-version: '3.x'

       - name: Install dependencies
         run: |
           python -m pip install --upgrade pip
           pip install -r requirements.txt
       - name: Execute child job
         run: |
          echo "Running ${{ matrix.job }}"           

       - name: Step 1 - Execute data Registration
         run: python test/data_registration.py

       - name: Step 2 - Execute schema Registration
         run: python test/schema_registration.py
       - name: Step 3 - Test calculator functionality
         env:
           PYTHONPATH: ./src
         run: python test/test_calculator.py
     Reporting:
       runs-on: ubuntu-latest
       needs: run_test_cases
       steps:
       - uses: actions/checkout@v2

       - name: Set up Python
         uses: actions/setup-python@v2
         with:
           python-version: '3.x'
     dataset_registation:
       runs-on: ubuntu-latest
       needs: run_test_cases
       steps:
       - uses: actions/checkout@v2

       - name: Set up Python
         uses: actions/setup-python@v2
         with:
           python-version: '3.x'
     schema_registation:
       runs-on: ubuntu-latest
       needs: run_test_cases
       steps:
         - uses: actions/checkout@v2

         - name: Set up Python
           uses: actions/setup-python@v2
           with:
             python-version: '3.x'